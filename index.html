<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QCM - R√®glement int√©rieur - Lyc√©e Vauban</title>
<link rel="icon" href="data:," />
<style>
  :root{
    /* Th√®me clair fun */
    --bg: #f8fafc;
    --card: #ffffff;
    --fg: #0f172a;
    --muted: #475569;
    --border: #e2e8f0;
    --accent: #7c3aed;     /* violet */
    --accent-2: #06b6d4;   /* cyan */
    --good: #16a34a;
    --bad: #dc2626;
    --shadow: 0 10px 30px rgba(2,6,23,.08);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    color: var(--fg);
    background:
      radial-gradient(80% 100% at 0% 0%, #e0f2fe 0%, transparent 35%),
      radial-gradient(80% 100% at 100% 0%, #ede9fe 0%, transparent 35%),
      var(--bg);
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }
  .wrap{
    min-height: 100dvh;
    display:flex; align-items:center; justify-content:center;
    padding: clamp(16px, 3vw, 32px);
  }
  .card{
    width: 100%;
    max-width: 980px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 24px;
    box-shadow: var(--shadow);
    padding: clamp(18px, 3.5vw, 36px);
    position:relative;
    overflow:hidden;
  }
  h1{
    font-size: clamp(24px, 4.5vw, 44px);
    margin: 0 0 10px 0; text-align:center;
    letter-spacing: .2px;
  }
  .subtitle{
    text-align:center; color: var(--muted);
    margin-bottom: 18px;
  }
  .center{
    display:flex; align-items:center; justify-content:center; gap:12px; flex-wrap:wrap;
  }
  .btn{
    appearance:none;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color:white; border:0; padding:14px 20px; border-radius:999px;
    font-size: clamp(16px, 2.2vw, 18px); font-weight:700; cursor:pointer;
    box-shadow: 0 8px 18px rgba(2,6,23,.15);
    transition: transform .06s ease, filter .2s ease, box-shadow .2s ease;
    outline:none;
  }
  .btn:hover{ transform: translateY(-1px); filter: brightness(1.05) }
  .btn:active{ transform: translateY(0) }
  .btn.secondary{
    background: #f1f5f9; border:1px solid var(--border); color:var(--fg);
  }
  .grid{
    display:grid; gap:12px; grid-template-columns: 1fr; margin: 16px 0;
  }
  .answer{
    text-align:left; width:100%;
    background: #ffffff; border:1.5px solid var(--border);
    padding: 14px 14px; border-radius: 14px; cursor:pointer;
    font-size: clamp(16px, 2.1vw, 18px); line-height:1.35;
    transition: border-color .15s ease, transform .05s ease, background .2s ease, box-shadow .2s ease;
  }
  .answer:hover{ border-color: #cbd5e1; box-shadow: 0 3px 10px rgba(2,6,23,.05) }
  .answer:active{ transform: scale(.99) }
  .answer.correct{ border-color: rgba(22,163,74,.85); background: #ecfdf5 }
  .answer.wrong{ border-color: rgba(220,38,38,.85); background: #fef2f2 }
  .toprow{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    margin-bottom:6px;
  }
  .pill{
    padding: 6px 10px; border-radius:999px; font-size:12px;
    border:1px solid var(--border); color: var(--muted); background: #fff;
  }
  .progress{ height:10px; background: #e2e8f0; border-radius: 999px; overflow:hidden; border:1px solid var(--border); }
  .bar{ height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .25s ease; }
  .question{ font-size: clamp(18px, 2.6vw, 22px); margin: 10px 0 6px 0; font-weight:700; }
  .footer{ margin-top:18px; display:flex; gap:10px; flex-wrap:wrap; justify-content:center; }
  .muted{ color: var(--muted) }
  hr{ border:0; border-top:1px solid var(--border); margin: 18px 0 }

  /* Encadr√© de r√©ponse imm√©diate */
  .solution{
    margin-top:12px;
    border: 1.5px solid var(--border);
    background:#f8fafc;
    border-left: 5px solid var(--accent);
    border-radius: 12px;
    padding: 12px 14px;
    display:none;
  }
  .solution.good{ border-left-color: var(--good); background:#f0fdf4 }
  .solution.bad{ border-left-color: var(--bad); background:#fef2f2 }
  .solution .title{ font-weight:800; margin-bottom:6px }
  .solution .detail{ color:var(--muted); }

  /* Emoji "qui r√©fl√©chit" + micro-animations */
  .thinker{
    display:none; align-items:center; gap:10px;
    font-size: 22px; color: #0f172a;
    margin-top: 8px;
  }
  .spin{ animation: spin .6s linear infinite }
  @keyframes spin{ from{transform:rotate(0)} to{transform:rotate(360deg)} }

  .pop{ animation: pop .25s ease }
  @keyframes pop{ 0%{transform:scale(.98)} 70%{transform:scale(1.02)} 100%{transform:scale(1)} }

  .shake{ animation: shake .25s ease }
  @keyframes shake{
    0%{ transform: translateX(0) }
    25%{ transform: translateX(-4px) }
    50%{ transform: translateX(4px) }
    75%{ transform: translateX(-2px) }
    100%{ transform: translateX(0) }
  }

  .synth{ background: #fff; border:1px solid var(--border); border-radius: 16px; padding: 14px; }
  ul.clean{ margin:0; padding-left: 18px }
  .brand{ text-align:center; font-size:12px; color:var(--muted); margin-top:8px }
  .footerline{ text-align:center; margin-top:12px; font-size:12px; color:#64748b }

  /* iPad-friendly touch targets */
  @media (hover:none){
    .answer{ padding: 16px 16px }
    .btn{ padding:16px 22px }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app">
      <!-- √âcran d'accueil -->
      <section id="screen-welcome">
        <h1>bienvenue QCM r√®glement int√©rieur Lycee Vauban 2025-26</h1>
        <p class="subtitle">Un QCM court et fun pour (re)voir les r√®gles essentielles du lyc√©e ‚ú®</p>
        <div class="center">
          <button class="btn" id="startBtn">D√©marrer le QCM</button>
          <button class="btn secondary" id="aboutBtn" title="√Ä propos">√Ä propos</button>
        </div>
        <p class="footerline">RI-Vauban- J. BARLETTA-</p>
      </section>

      <!-- √âcran QCM -->
      <section id="screen-quiz" style="display:none">
        <div class="toprow">
          <div class="pill" id="pillProg">Question 1 / 20</div>
          <div class="pill" id="pillScore">Score : 0</div>
        </div>
        <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
        <h2 class="question pop" id="qText">Question</h2>
        <div class="grid pop" id="answers"></div>

        <!-- Emoji qui r√©fl√©chit -->
        <div class="thinker" id="thinker"><span class="spin">ü§î</span><span class="muted">R√©flexion en cours...</span></div>

        <!-- R√©ponse imm√©diate -->
        <div id="solutionBox" class="solution" aria-live="polite">
          <div class="title" id="solutionTitle">Solution</div>
          <div class="detail" id="solutionDetail">Explication</div>
        </div>

        <div class="footer">
          <button class="btn secondary" id="btnPrev" disabled>Pr√©c√©dent</button>
          <button class="btn" id="btnNext" disabled>Question suivante</button>
        </div>
        <p class="footerline">RI-Vauban- J. BARLETTA-</p>
      </section>

      <!-- √âcran r√©sultat / synth√®se -->
      <section id="screen-result" style="display:none">
        <h1>R√©sultat</h1>
        <p class="subtitle" id="finalLine"></p>
        <div class="center">
          <button class="btn" id="retryBtn">Rejouer</button>
          <button class="btn secondary" id="seeSynthBtn">Voir la synth√®se</button>
        </div>
        <hr />
        <div id="synthese" class="synth" style="display:none">
          <h3>üß≠ Synth√®se ‚Äì R√®glement int√©rieur (essentiels)</h3>
          <ul class="clean" id="synthList"></ul>
          <div class="footer">
            <button class="btn" id="csvBtn" title="Exporter en CSV">Exporter la synth√®se (CSV)</button>
          </div>
        </div>
        <p class="footerline">RI-Vauban- J. BARLETTA-</p>
      </section>

      <!-- √Ä propos -->
      <section id="screen-about" style="display:none">
        <h1>√Ä propos</h1>
        <p class="subtitle">QCM bas√© sur le <em>R√®glement int√©rieur Coll√®ge & Lyc√©e Vauban</em> (11/06/2025).</p>
        <p class="muted">Utilisable sur iPad. Aucune librairie externe ‚Äî h√©bergeable tel quel sur GitHub Pages.</p>
        <div class="center">
          <button class="btn secondary" id="backHomeBtn">Retour</button>
        </div>
        <p class="footerline">RI-Vauban- J. BARLETTA-</p>
      </section>

      <div class="brand">¬© Lyc√©e Vauban ‚Äì QCM p√©dagogique</div>
    </div>
  </div>

<script>
/* ===================== Donn√©es du QCM ===================== */
const QUESTIONS = [
  { q: "Les cours ont lieu du lundi 8 h 15 au vendredi 17 h 50.",
    options: ["Vrai", "Faux", "Du lundi 8 h 00 au samedi 12 h 00"], a: 0,
    explain: "Le RI pr√©cise que les cours se tiennent du lundi 8 h 15 au vendredi 17 h 50." },
  { q: "Sans badge d‚Äôacc√®s et sans passage √† l‚Äôaccueil, on est consid√©r√© comme‚Ä¶",
    options: ["Autoris√© mais surveill√©", "Absent (hors responsabilit√© de l‚Äô√©tablissement)", "Retardataire mais autoris√© √† sortir"], a: 1,
    explain: "Entrer sans badge et sans se pr√©senter √† l‚Äôaccueil = absent ; aucune sortie en journ√©e sans badge." },
  { q: "Badge perdu non retrouv√© apr√®s 8 jours :",
    options: ["Renouvel√© automatiquement et factur√© 20 ‚Ç¨", "Interdit d‚Äôentr√©e un mois", "Remplac√© gratuitement"], a: 0,
    explain: "Le badge est renouvel√© et factur√© 20 ‚Ç¨ apr√®s 8 jours (ou en cas de d√©gradation volontaire)." },
  { q: "√Ä l‚Äôentr√©e, le t√©l√©phone doit √™tre‚Ä¶",
    options: ["En silencieux dans la poche", "√âteint dans la pochette ¬´ No phone ¬ª verrouill√©e", "Autoris√© au foyer uniquement"], a: 1,
    explain: "Usage interdit : le t√©l√©phone est √©teint et plac√© dans la pochette ¬´ No phone ¬ª verrouill√©e, d√®s l‚Äôentr√©e." },
  { q: "On d√©verrouille la pochette ¬´ No phone ¬ª‚Ä¶",
    options: ["√Ä la r√©cr√©ation", "√Ä la fin de la demi-journ√©e (externes) ou de la journ√©e (demi-pensionnaires)", "√Ä midi pour tous"], a: 1,
    explain: "D√©verrouillage en fin de demi-journ√©e pour les externes, en fin de journ√©e pour les demi-pensionnaires." },
  { q: "iPad :",
    options: ["Libre, sans charte", "Mauvaise utilisation = restriction ; charte iPad engage l‚Äô√©l√®ve", "Autoris√© seulement en informatique"], a: 1,
    explain: "Toute mauvaise utilisation entra√Æne des restrictions ; la charte iPad engage l‚Äô√©l√®ve." },
  { q: "Acc√®s au casier :",
    options: ["√Ä tout moment", "Avant la 1re heure, pendant la pause m√©ridienne, au d√©part (pas aux interclasses/r√©cr√©s sauf sac de sport)", "Jamais"], a: 1,
    explain: "Acc√®s aux moments d√©finis ; pas d‚Äôacc√®s aux interclasses/r√©cr√©ations, sauf pour d√©poser le sac de sport." },
  { q: "R√©cr√©ation au coll√®ge :",
    options: ["On reste dans les b√¢timents", "On se rend dans la cour (on ne reste pas dans les b√¢timents)", "Libre acc√®s au CDI sans badge"], a: 1,
    explain: "Les coll√©giens ne restent pas dans les b√¢timents ; ils vont dans leur cour." },
  { q: "Horaires de la caf√©t√©ria :",
    options: ["7 h 45 ‚Äì 15 h 15", "12 h 00 ‚Äì 14 h 00", "8 h 00 ‚Äì 18 h 00"], a: 0,
    explain: "La caf√©t√©ria est ouverte de 7 h 45 √† 15 h 15." },
  { q: "Acc√®s au restaurant scolaire (oubli de badge) :",
    options: ["Pas de repas", "Fin de service avec billet de la gestion des absences/retards", "On peut emprunter le badge d‚Äôun camarade"], a: 1,
    explain: "En cas d‚Äôoubli, √† titre exceptionnel, l‚Äô√©l√®ve mange en fin de service, muni d‚Äôun billet." },
  { q: "Le foyer des coll√©giens :",
    options: ["Ouvert √† tous, repas autoris√©s", "R√©serv√© aux coll√©giens ; nourriture et boisson interdites", "R√©serv√© aux lyc√©ens"], a: 1,
    explain: "Foyer = espace r√©serv√© aux coll√©giens ; sans nourriture ni boisson." },
  { q: "Ascenseurs :",
    options: ["Ouverts √† tous", "R√©serv√©s au personnel et aux √©l√®ves √† mobilit√© r√©duite (badge sp√©cifique)", "R√©serv√©s aux lyc√©ens"], a: 1,
    explain: "Acc√®s ascenseurs restreint ; un badge sp√©cifique est d√©livr√© si n√©cessaire." },
  { q: "Sorties de l‚Äô√©tablissement :",
    options: ["Autoris√© pendant les interclasses", "R√©cr√©ations interdites (sauf √©l√®ves majeurs) ; aucune sortie aux interclasses", "Libre si on pr√©vient un camarade"], a: 1,
    explain: "Sorties encadr√©es : pas d‚Äôinterclasses ; r√©cr√©ations interdites (sauf majeurs)." },
  { q: "En journ√©e, un √©l√®ve en retard :",
    options: ["Entre discr√®tement en cours", "N‚Äôest pas accept√© en cours et va au foyer des coll√©giens", "Peut entrer avec l‚Äôaccord d‚Äôun √©l√®ve d√©l√©gu√©"], a: 1,
    explain: "En journ√©e, aucun √©l√®ve en retard n‚Äôest accept√© en cours ; il se rend au foyer." },
  { q: "D√®s 5 retards non justifi√©s/trimestre :",
    options: ["Exclusion 3 jours", "Retenue d‚Äô1 heure", "Aucune cons√©quence"], a: 1,
    explain: "√Ä 5 retards non justifi√©s, une retenue d‚Äôune heure est appliqu√©e." },
  { q: "Absences l√©gitimes :",
    options: ["Maladie, d√©c√®s d‚Äôun proche, force majeure", "Voyage familial, activit√© sportive priv√©e, job √©tudiant", "Fatigue, envie de r√©viser chez soi"], a: 0,
    explain: "La loi pr√©cise trois motifs l√©gitimes : maladie, d√©c√®s d‚Äôun proche, cas de force majeure." },
  { q: "Dispense d‚ÄôEPS :",
    options: ["Autorise √† quitter l‚Äô√©tablissement", "Requiert un certificat m√©dical ; l‚Äô√©l√®ve reste au lyc√©e (cours/salle de travail/CDI)", "Peut √™tre auto-sign√©e √† l‚Äôann√©e"], a: 1,
    explain: "Dispense = motif m√©dical. L‚Äô√©l√®ve reste au lyc√©e (pr√©sence en cours ou salle de travail/CDI)." },
  { q: "Puff / cigarette √©lectronique :",
    options: ["Mineurs autoris√©s √† d√©tenir mais pas vapoter", "Interdite pour les mineurs (d√©tention et usage) ; confisqu√©e et d√©truite", "Autoris√©e en ext√©rieur"], a: 1,
    explain: "Les mineurs ne peuvent ni vapoter ni d√©tenir une e-cigarette. Marchandise confisqu√©e et d√©truite." },
  { q: "Objets/produits interdits :",
    options: ["Pistolet √† billes, a√©rosol, objet tranchant", "Livre, gourde", "Cl√© USB, r√®gle"], a: 0,
    explain: "Tout objet dangereux/troublant (armes, armes factices, a√©rosols, objets tranchants‚Ä¶) est interdit." },
  { q: "Droit d‚Äôexpression :",
    options: ["Autorise le pros√©lytisme", "Existe, mais n‚Äôautorise aucun pros√©lytisme/propagande", "Uniquement pour les d√©l√©gu√©s"], a: 1,
    explain: "Les √©l√®ves ont des droits, sans acte de pros√©lytisme ni de propagande." },
];

/* Synth√®se (export CSV) */
const SYNTHESE_ITEMS = [
  ["Badge d‚Äôacc√®s", "Obligatoire ; en cas d‚Äôoubli ‚Üí accueil ; aucune sortie en journ√©e sans badge ; renouvellement 20 ‚Ç¨ si non retrouv√© > 8 jours."],
  ["T√©l√©phone/objets connect√©s", "Interdits. T√©l√©phone √©teint dans pochette ¬´ No phone ¬ª verrouill√©e d√®s l‚Äôentr√©e ; pas de captation d‚Äôimages/sons."],
  ["iPad", "Charte iPad engage ; mauvaise utilisation = restriction des usages."],
  ["Casier", "R√©serv√© aux affaires scolaires ; acc√®s avant 1re heure, pause m√©ridienne, d√©part (pas interclasses/r√©cr√© sauf sac de sport)."],
  ["R√©cr√©ations", "Coll√©giens dans leur cour ; on ne reste pas dans les b√¢timents."],
  ["Cantine/Caf√©t√©ria", "Cantine via badge (oubli ‚Üí fin de service avec billet). Caf√©t√©ria 7 h 45 ‚Äì 15 h 15 ; pas de canettes ; pas de frigo/micro-ondes."],
  ["Foyer/CDI/Espaces", "Foyer r√©serv√© aux coll√©giens (sans nourriture/boisson). CDI et salles d‚Äôautonomie : r√®gles & horaires d√©di√©s."],
  ["Ascenseurs", "R√©serv√©s au personnel et √©l√®ves √† mobilit√© r√©duite (badge sp√©cifique)."],
  ["Sorties", "Pas aux interclasses ; r√©cr√©ations interdites (sauf majeurs). Proc√©dure ¬´ sortie exceptionnelle ¬ª si besoin."],
  ["Retards", "En journ√©e : non admis en cours ‚Üí foyer. √Ä 5 retards non justifi√©s/trimestre : 1h de retenue."],
  ["Absences", "Motifs l√©gitimes : maladie, d√©c√®s d‚Äôun proche, force majeure. Justificatifs requis."],
  ["Dispense d‚ÄôEPS", "Certificat m√©dical ; l‚Äô√©l√®ve reste au lyc√©e (cours/salle de travail/CDI). Longue dur√©e = ‚â• 1 mois."],
  ["Puff / e-cigarette", "Mineurs : d√©tention et usage interdits ; marchandise confisqu√©e et d√©truite. Interdit pour tous dans l‚Äôenceinte."],
  ["S√©curit√© / objets", "Objets dangereux (armes, armes factices, a√©rosols, objets tranchants‚Ä¶) interdits et sanctionn√©s."],
  ["Tenue & neutralit√©", "Tenue correcte ; signes religieux ostensibles et dissimulation du visage interdits."],
  ["Droit d‚Äôexpression", "Exerc√© sans pros√©lytisme ni propagande."]
];

/* ===================== M√©canique du QCM ===================== */
let i = 0, score = 0, answered = false;

const $ = sel => document.querySelector(sel);
const app = {
  screens: {
    welcome: $("#screen-welcome"),
    quiz: $("#screen-quiz"),
    result: $("#screen-result"),
    about: $("#screen-about")
  },
  el: {
    start: $("#startBtn"),
    about: $("#aboutBtn"),
    backHome: $("#backHomeBtn"),
    pillProg: $("#pillProg"),
    pillScore: $("#pillScore"),
    bar: $("#bar"),
    qText: $("#qText"),
    answers: $("#answers"),
    thinker: $("#thinker"),
    solutionBox: $("#solutionBox"),
    solutionTitle: $("#solutionTitle"),
    solutionDetail: $("#solutionDetail"),
    btnPrev: $("#btnPrev"),
    btnNext: $("#btnNext"),
    finalLine: $("#finalLine"),
    retry: $("#retryBtn"),
    seeSynth: $("#seeSynthBtn"),
    synthWrap: $("#synthese"),
    synthList: $("#synthList"),
    csvBtn: $("#csvBtn"),
  }
};

function show(screen){
  Object.values(app.screens).forEach(s => s.style.display="none");
  screen.style.display = "";
}

function start(){
  i = 0; score = 0; answered = false;
  app.el.pillScore.textContent = "Score : 0";
  renderQuestion();
  show(app.screens.quiz);
}

function renderQuestion(){
  const q = QUESTIONS[i];
  app.el.pillProg.textContent = `Question ${i+1} / ${QUESTIONS.length}`;
  app.el.bar.style.width = `${(i)/QUESTIONS.length*100}%`;
  app.el.qText.textContent = q.q;
  app.el.answers.innerHTML = "";
  app.el.btnPrev.disabled = i === 0;
  app.el.btnNext.disabled = true;
  app.el.solutionBox.style.display = "none";
  app.el.solutionBox.classList.remove("good","bad");
  app.el.thinker.style.display = "none";
  answered = false;

  q.options.forEach((opt, idx)=>{
    const btn = document.createElement("button");
    btn.className = "answer";
    btn.innerHTML = opt;
    btn.addEventListener("click", ()=>onAnswer(idx));
    app.el.answers.appendChild(btn);
  });
}

function onAnswer(idx){
  if (answered) return;
  answered = true;

  // Affiche l'emoji qui r√©fl√©chit pendant un court instant
  app.el.thinker.style.display = "flex";

  // D√©sactive imm√©diatement les options
  [...app.el.answers.children].forEach(b=>b.disabled = true);

  // Petit d√©lai pour que l'emoji "ü§î" soit visible, puis on r√©v√®le
  setTimeout(()=>{
    const q = QUESTIONS[i];
    const correct = idx === q.a;
    const chosenBtn = app.el.answers.children[idx];
    const goodBtn = app.el.answers.children[q.a];

    if (correct){
      goodBtn.classList.add("correct","pop");
      app.el.solutionTitle.textContent = "‚úÖ Bonne r√©ponse";
      app.el.solutionDetail.innerHTML = q.explain;
      app.el.solutionBox.classList.add("good");
      score++;
      app.el.pillScore.textContent = `Score : ${score}`;
    }else{
      chosenBtn.classList.add("wrong","shake");
      goodBtn.classList.add("correct","pop");
      app.el.solutionTitle.textContent = "‚ùå Mauvaise r√©ponse ‚Äì Solution";
      app.el.solutionDetail.innerHTML = `<strong>R√©ponse attendue :</strong> ${q.options[q.a]}<br>${q.explain}`;
      app.el.solutionBox.classList.add("bad");
    }

    app.el.solutionBox.style.display = "";
    app.el.btnNext.disabled = false;
    app.el.thinker.style.display = "none";
  }, 550);
}

function next(){
  if (!answered) return;
  if (i < QUESTIONS.length - 1){
    i++; renderQuestion();
  }else{
    finish();
  }
}

function prev(){
  if (i>0){ i--; renderQuestion(); }
}

function finish(){
  app.el.bar.style.width = "100%";
  const pct = Math.round(score/QUESTIONS.length*100);
  let emoji = "üí™";
  if (pct === 100) emoji = "üèÜ";
  else if (pct >= 80) emoji = "üéØ";
  else if (pct >= 60) emoji = "üëç";
  else if (pct >= 40) emoji = "üôÇ";
  else emoji = "üå±";
  app.el.finalLine.textContent = `${emoji} Score : ${score}/${QUESTIONS.length} (${pct} %)`;
  show(app.screens.result);
}

function buildSynth(){
  if (app.el.synthWrap.style.display !== "none") return;
  app.el.synthList.innerHTML = "";
  SYNTHESE_ITEMS.forEach(([theme, texte])=>{
    const li = document.createElement("li");
    li.innerHTML = `<strong>${theme} :</strong> ${texte}`;
    app.el.synthList.appendChild(li);
  });
  app.el.synthWrap.style.display = "";
}

function exportCSV(){
  const rows = [["Theme","Regle"]];
  SYNTHESE_ITEMS.forEach(r => rows.push(r));
  const csv = rows.map(r=>r.map(x=>`"${String(x).replaceAll('"','""')}"`).join(",")).join("\r\n");
  const blob = new Blob([csv], {type:"text/csv;charset=utf-8"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "synthese-reglement-lycee-vauban.csv";
  document.body.appendChild(a);
  a.click();
  a.remove();
}

/* ===================== Events ===================== */
$("#startBtn").addEventListener("click", start);
$("#aboutBtn").addEventListener("click", ()=>show(app.screens.about));
$("#backHomeBtn").addEventListener("click", ()=>show(app.screens.welcome));
$("#btnNext").addEventListener("click", next);
$("#btnPrev").addEventListener("click", prev);
$("#retryBtn").addEventListener("click", start);
$("#seeSynthBtn").addEventListener("click", buildSynth);
$("#csvBtn").addEventListener("click", exportCSV);

/* Accessibilit√© clavier : fl√®ches et Enter */
window.addEventListener("keydown", (e)=>{
  if (app.screens.quiz.style.display !== "none"){
    if (e.key === "ArrowRight") next();
    if (e.key === "ArrowLeft") prev();
  }
});
</script>
</body>
</html>
