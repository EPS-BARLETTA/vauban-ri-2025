<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AS Planner ‚Äì Lyc√©e Vauban</title>
  <style>
    :root{
      --green:#2ecc71; /* Accueil */
      --blue:#3498db;  /* Trier/Actions */
      --red:#e74c3c;   /* R√©initialiser */
      --yellow:#f1c40f;/* Accent */
      --violet:#9b59b6;/* Aide */
      --bg:#f7f7fb;
      --card:#ffffff;
      --muted:#6b7280;
      --ink:#111827;
      --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    header{
      position:sticky;top:0;z-index:10;background:linear-gradient(180deg,#fff,rgba(255,255,255,.88));
      border-bottom:1px solid var(--border);backdrop-filter:saturate(1.2) blur(6px);
    }
    .wrap{max-width:1200px;margin:0 auto;padding:16px}
    h1{margin:0;font-size:1.35rem;letter-spacing:.2px}
    .tagline{color:var(--muted);font-size:.9rem}

    .toolbar{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .btn{appearance:none;border:1px solid transparent;background:var(--blue);color:#fff;padding:10px 14px;border-radius:14px;font-weight:650;cursor:pointer;box-shadow:0 6px 16px rgba(0,0,0,.06)}
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}
    .btn.green{background:var(--green)}
    .btn.red{background:var(--red)}
    .btn.violet{background:var(--violet)}
    .btn.yellow{background:var(--yellow);color:#111}
    .btn.outline{background:#fff;color:#111;border-color:var(--border)}

    .panel{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;margin-top:16px}
    .panel h2{margin:0 0 10px;font-size:1.05rem}

    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    @media (max-width:1100px){.grid{grid-template-columns:repeat(6,1fr)}}
    @media (max-width:740px){.grid{grid-template-columns:repeat(2,1fr)}}

    .mapping{display:grid;grid-template-columns:1fr 2fr;gap:10px}
    .mapping label{color:var(--muted);font-size:.9rem}
    select, input[type="text"], textarea{
      width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#fff;font:inherit
    }

    .dropzone{
      border:2px dashed var(--border);border-radius:16px;padding:16px;text-align:center;color:var(--muted);background:#fff
    }
    .dropzone.drag{border-color:var(--blue);background:#f0f7ff}

    .columnsWrap{overflow:auto;padding-bottom:8px}
    .columns{display:flex;gap:12px;min-height:120px}
    .col{min-width:260px;background:var(--card);border:1px solid var(--border);border-radius:18px}
    .col header{position:sticky;top:0}
    .colTitle{padding:12px 14px;border-bottom:1px solid var(--border);font-weight:700}
    .cards{padding:12px}
    .card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:12px;margin-bottom:10px}
    .card h4{margin:0 0 6px;font-size:1rem}
    .meta{font-size:.85rem;color:var(--muted)}
    .badges{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px}
    .badge{font-size:.75rem;border-radius:999px;padding:4px 8px;border:1px solid var(--border);background:#fafafa}
    .cap{font-weight:700}
    .cap.ok{color:#0d9488}
    .cap.warn{color:#ca8a04}
    .cap.full{color:#b91c1c}
    .hl{background:#f3e8ff;border-color:#e9d5ff}

    .legend{display:flex;gap:8px;flex-wrap:wrap}
    .legend .chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;font-size:.85rem}
    .dot{width:10px;height:10px;border-radius:999px;background:var(--muted)}
    .dot.ok{background:#10b981}.dot.warn{background:#f59e0b}.dot.full{background:#ef4444}

    footer{margin:28px 0 60px;color:var(--muted);font-size:.85rem;text-align:center}

    /* Print */
    @media print{
      header,.panel,#help{display:none!important}
      .columns{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
      .col{break-inside:avoid}
      body{background:#fff}
      footer{position:fixed;bottom:8px;left:0;right:0}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap" style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px;">
      <div>
        <h1>AS Planner ‚Äì Visualisateur d‚Äôactivit√©s</h1>
        <div class="tagline">Import CSV export√© depuis Numbers ‚Üí mapping des colonnes ‚Üí affichage par jour & cr√©neau. Compatible iPad. </div>
      </div>
      <div class="toolbar">
        <button class="btn green" onclick="scrollToTop()">üè† Accueil</button>
        <label class="btn outline" for="csvFile">üì• Importer CSV</label>
        <input id="csvFile" type="file" accept=".csv,text/csv" style="display:none"/>
        <button class="btn" onclick="exportViewCsv()">‚¨áÔ∏è Exporter CSV</button>
        <button class="btn yellow" onclick="window.print()">üñ®Ô∏è Imprimer / PDF</button>
        <button class="btn red" onclick="resetAll()">‚ôªÔ∏è R√©initialiser</button>
        <button class="btn violet" onclick="toggleHelp()">‚ùì Aide</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="panel" id="ingest">
      <h2>1) Import du fichier (CSV export√© depuis Numbers)</h2>
      <div class="dropzone" id="dropzone">
        Glissez-d√©posez votre CSV ici‚Ä¶ ou cliquez sur <strong>Importer CSV</strong> ci-dessus.<br>
        <small>Astuce Numbers : Fichier ‚Üí <em>Exporter vers</em> ‚Üí <em>CSV</em>. Le s√©parateur est d√©tect√© automatiquement (, ; ou tabulations).</small>
      </div>
      <div style="margin-top:12px">
        <textarea id="paste" rows="4" placeholder="‚Ä¶ou collez des lignes CSV ici"></textarea>
        <div class="toolbar" style="margin-top:8px">
          <button class="btn outline" onclick="usePasted()">‚ÜòÔ∏è Utiliser le texte coll√©</button>
          <button class="btn outline" onclick="loadDemo()">üß™ Charger un exemple</button>
        </div>
      </div>
    </section>

    <section class="panel" id="mappingPanel" style="display:none">
      <h2>2) Associer vos colonnes</h2>
      <div class="mapping" id="mappingForm"></div>
      <div class="toolbar" style="margin-top:12px">
        <button class="btn" onclick="applyMapping()">üéØ Appliquer le mapping</button>
      </div>
    </section>

    <section class="panel" id="filtersPanel" style="display:none">
      <h2>Filtres & options d‚Äôaffichage</h2>
      <div class="legend">
        <span class="chip"><span class="dot ok"></span> Sous capacit√©</span>
        <span class="chip"><span class="dot warn"></span> Presque plein</span>
        <span class="chip"><span class="dot full"></span> Complet</span>
        <span class="chip hl">Surbrillance par libell√© (optionnelle)</span>
      </div>
      <div class="grid" style="margin-top:10px">
        <div style="grid-column:span 4">
          <label>Valeur √† surligner (ex. ¬´¬†AS lyc√©e¬†¬ª, ¬´¬†Coll√®ge¬†¬ª, etc.)</label>
          <input type="text" id="highlightValue" placeholder="Tapez une valeur pr√©sente dans la colonne ‚ÄòLibell√©‚Äô si mapp√©e" oninput="render()" />
        </div>
        <div style="grid-column:span 4">
          <label>Filtrer par jour</label>
          <select id="dayFilter" onchange="render()"></select>
        </div>
        <div style="grid-column:span 4">
          <label>Filtrer par cr√©neau</label>
          <select id="slotFilter" onchange="render()"></select>
        </div>
      </div>
    </section>

    <section id="view" class="panel" style="display:none">
      <h2 style="margin-bottom:8px">3) Vue par jour & cr√©neau</h2>
      <div class="columnsWrap"><div class="columns" id="columns"></div></div>
    </section>

    <footer>AS Planner ‚Ä¢ ScanProf-style UI ‚Ä¢ √âquipe EPS Lyc√©e Vauban ‚Äì LUXEMBOURG ‚Äì JB</footer>
  </main>

  <!-- Aide overlay -->
  <dialog id="help" style="max-width:760px;width:92%;border:1px solid var(--border);border-radius:18px;padding:0;">
    <div style="padding:18px">
      <h3 style="margin:0 0 8px">Aide rapide</h3>
      <ol>
        <li><strong>Dans Numbers</strong> : <em>Fichier ‚Üí Exporter vers ‚Üí CSV</em>.</li>
        <li><strong>Importez</strong> le CSV (bouton ou glisser-d√©poser).</li>
        <li><strong>Associez</strong> vos colonnes (Jour, Cr√©neau, Activit√©, Prof, etc.).</li>
        <li><strong>Affichez</strong> : la vue groupe automatiquement par <em>jour + cr√©neau</em>.</li>
        <li><strong>Imprimez</strong> (PDF) ou <strong>exportez</strong> la synth√®se CSV.</li>
      </ol>
      <p style="color:var(--muted);font-size:.9rem">Boutons harmonis√©s : üü© Accueil ‚Ä¢ üîµ Actions ‚Ä¢ üî¥ R√©initialiser ‚Ä¢ üü£ Aide ‚Ä¢ üü° Impression/PDF.</p>
      <div class="toolbar" style="justify-content:flex-end">
        <button class="btn outline" onclick="toggleHelp()">Fermer</button>
      </div>
    </div>
  </dialog>

<script>
// --------------------- State ---------------------
let rawRows = [] // array of objects by header
let headers = []
let delimiter = ','
let mapping = {
  day:null,       // Jour
  slot:null,      // Cr√©neau (ex: 12-13)
  start:null,     // Heure d√©but (optionnel si slot)
  end:null,       // Heure fin (optionnel si slot)
  activity:null,  // Activit√©
  teacher:null,   // Prof
  room:null,      // Lieu/Salle
  capacity:null,  // Capacit√© max
  count:null,     // Nb inscrits (nombre)
  list:null,      // Liste des √©l√®ves (s√©par√©s par virgules / retours)
  label:null      // Libell√© (ex. AS lyc√©e / Coll√®ge)
}

const JOUR_ORDER = ['Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi','Dimanche']

// --------------------- Utils ---------------------
function scrollToTop(){ window.scrollTo({top:0, behavior:'smooth'}) }
function toggleHelp(){ const d=document.getElementById('help'); d.open ? d.close() : d.showModal() }
function resetAll(){ localStorage.removeItem('asplanner'); location.reload() }

function saveState(){
  const state = {rawRows, headers, delimiter, mapping}
  localStorage.setItem('asplanner', JSON.stringify(state))
}
function loadState(){
  const s = localStorage.getItem('asplanner')
  if(!s) return false
  try{
    const st = JSON.parse(s)
    rawRows = st.rawRows||[]
    headers = st.headers||[]
    delimiter = st.delimiter||','
    mapping = Object.assign(mapping, st.mapping||{})
    if(rawRows.length){
      showMapping()
      if(mapping.day && (mapping.slot || (mapping.start&&mapping.end)) && mapping.activity){
        applyMapping()
      }
      return true
    }
  }catch(e){console.warn('Load state error',e)}
  return false
}

function guessDelimiter(text){
  const c = (text.match(/,/g)||[]).length
  const s = (text.match(/;/g)||[]).length
  const t = (text.match(/\t/g)||[]).length
  if(t>c && t>s) return '\t'
  if(s>c) return ';'
  return ','
}

function parseCSV(text){
  delimiter = guessDelimiter(text)
  const rows=[]
  let i=0, field='', row=[], inQuotes=false
  const pushField=()=>{ row.push(field); field='' }
  const pushRow=()=>{ rows.push(row); row=[] }
  while(i<text.length){
    const ch=text[i]
    if(inQuotes){
      if(ch==='"'){
        if(text[i+1]==='"'){ field+='"'; i++ } else { inQuotes=false }
      } else { field+=ch }
    } else {
      if(ch==='"') { inQuotes=true }
      else if(ch===delimiter){ pushField() }
      else if(ch==='\n'){ pushField(); pushRow() }
      else if(ch==='\r'){ /* ignore */ }
      else { field+=ch }
    }
    i++
  }
  if(field.length||row.length){ pushField(); pushRow() }
  return rows
}

function canonicalizeHeader(h){
  const x=(h||'').toString().trim()
  return x
}

// --------------------- Ingest ---------------------
function handleTable(rows){
  if(!rows.length){ alert('CSV vide'); return }
  headers = rows[0].map(canonicalizeHeader)
  rawRows = rows.slice(1).map(r=>{
    const o={}
    headers.forEach((h,idx)=>o[h]=r[idx]!==undefined?r[idx]:"")
    return o
  })
  saveState()
  showMapping()
}

function showMapping(){
  document.getElementById('mappingPanel').style.display='block'
  const form=document.getElementById('mappingForm')
  form.innerHTML=''
  const makeSel=(id,label,placeholder=null)=>{
    const wrap=document.createElement('div')
    const lab=document.createElement('label'); lab.textContent=label
    const sel=document.createElement('select'); sel.id='map_'+id
    const opt0=document.createElement('option'); opt0.value=''; opt0.textContent=placeholder||'(aucune)'
    sel.appendChild(opt0)
    headers.forEach(h=>{ const o=document.createElement('option'); o.value=h; o.textContent=h; sel.appendChild(o) })
    if(mapping[id]) sel.value=mapping[id]
    wrap.appendChild(lab); wrap.appendChild(sel)
    form.appendChild(wrap)
  }
  makeSel('day','Jour')
  makeSel('slot','Cr√©neau (ex: 12-13)')
  makeSel('start','Heure d√©but (si pas de cr√©neau)')
  makeSel('end','Heure fin (si pas de cr√©neau)')
  makeSel('activity','Activit√©')
  makeSel('teacher','Prof')
  makeSel('room','Lieu / Salle')
  makeSel('capacity','Capacit√© max')
  makeSel('count','Nb inscrits (nombre)')
  makeSel('list','Liste √©l√®ves (texte)')
  makeSel('label','Libell√© (AS lyc√©e / Coll√®ge / etc.)')

  // Show filters panel when mapping exists
  document.getElementById('filtersPanel').style.display='block'
}

function applyMapping(){
  const ids = Object.keys(mapping)
  ids.forEach(id=>{ const sel=document.getElementById('map_'+id); if(sel) mapping[id]=sel.value||null })
  saveState()
  render()
}

// --------------------- Transform & Render ---------------------
function normSlot(start,end,slot){
  const norm=(s)=>s.toString().trim().replace(/[hH]/,'h')
  if(slot){
    let x=slot.toString().trim()
    x=x.replace(/\s+/g,'').replace(/[‚Äì‚Äî]/g,'-')
    if(/^(\d{1,2})h?(\d{0,2})?-(\d{1,2})h?(\d{0,2})?$/.test(x)){
      const m=x.match(/(\d{1,2})h?(\d{0,2})?-(\d{1,2})h?(\d{0,2})?/)
      const h1=(m[1]||'').padStart(2,'0'), m1=(m[2]||'00').padStart(2,'0')
      const h2=(m[3]||'').padStart(2,'0'), m2=(m[4]||'00').padStart(2,'0')
      return `${h1}:${m1}-${h2}:${m2}`
    }
    // fallback: 12-13
    const mm=x.match(/(\d{1,2})-(\d{1,2})/)
    if(mm){
      const h1=mm[1].padStart(2,'0')
      const h2=mm[2].padStart(2,'0')
      return `${h1}:00-${h2}:00`
    }
    return slot
  }
  if(start && end){
    const s=norm(start), e=norm(end)
    const fix=t=>{
      const m=t.match(/(\d{1,2})(?:h|:)?(\d{0,2})/)
      if(!m) return t
      const h=m[1].padStart(2,'0'); const mm=(m[2]||'00').padStart(2,'0')
      return `${h}:${mm}`
    }
    return `${fix(s)}-${fix(e)}`
  }
  return ''
}

function toInt(x){
  if(x==null) return 0
  const s=x.toString().replace(/\s/g,'').replace(',', '.')
  const n=parseFloat(s)
  if(Number.isFinite(n)) return Math.round(n)
  return 0
}

function splitList(txt){
  if(!txt) return []
  return txt.split(/\r?\n|,|;|\//).map(s=>s.trim()).filter(Boolean)
}

function normalizeRows(){
  const out=[]
  for(const r of rawRows){
    const obj={
      day: mapping.day ? (r[mapping.day]||'').toString().trim() : '',
      slot: normSlot(mapping.start? r[mapping.start]:null, mapping.end? r[mapping.end]:null, mapping.slot? r[mapping.slot]:null),
      activity: mapping.activity? (r[mapping.activity]||'').toString().trim(): '',
      teacher: mapping.teacher? (r[mapping.teacher]||'').toString().trim(): '',
      room: mapping.room? (r[mapping.room]||'').toString().trim(): '',
      capacity: mapping.capacity? toInt(r[mapping.capacity]): 0,
      label: mapping.label? (r[mapping.label]||'').toString().trim(): '',
      count: 0,
      list: []
    }
    if(mapping.list){ obj.list = splitList(r[mapping.list]); obj.count = obj.list.length }
    else if(mapping.count){ obj.count = toInt(r[mapping.count]) }
    out.push(obj)
  }
  return out
}

function sortByDaySlot(a,b){
  const da=JOUR_ORDER.indexOf(a.day); const db=JOUR_ORDER.indexOf(b.day)
  if(da!==db) return da-db
  const sa=(a.slot||'').split('-')[0]; const sb=(b.slot||'').split('-')[0]
  return sa.localeCompare(sb)
}

function render(){
  const rows = normalizeRows()
  // Filters
  const daySel=document.getElementById('dayFilter')
  const slotSel=document.getElementById('slotFilter')
  const days=[...new Set(rows.map(r=>r.day).filter(Boolean))]
  const slots=[...new Set(rows.map(r=>r.slot).filter(Boolean))]
  function refill(sel, list){
    const cur=sel.value
    sel.innerHTML='<option value="">(tous)</option>' + list.map(v=>`<option>${v}</option>`).join('')
    if(list.includes(cur)) sel.value=cur
  }
  refill(daySel, days)
  refill(slotSel, slots)

  const fDay=daySel.value||null
  const fSlot=slotSel.value||null
  const hl=(document.getElementById('highlightValue').value||'').trim().toLowerCase()
  const filtered = rows.filter(r=>(!fDay||r.day===fDay)&&(!fSlot||r.slot===fSlot))

  // Group by day+slot
  const groups={}
  for(const r of filtered){
    const key = `${r.day}__${r.slot}`
    if(!groups[key]) groups[key]={ day:r.day, slot:r.slot, items:[] }
    groups[key].items.push(r)
  }
  const keys=Object.keys(groups).sort((ka,kb)=>{
    const A=groups[ka], B=groups[kb]
    return sortByDaySlot(A,B)
  })

  const cols=document.getElementById('columns')
  cols.innerHTML=''
  for(const k of keys){
    const g=groups[k]
    const col=document.createElement('div'); col.className='col'
    const head=document.createElement('div'); head.className='colTitle'; head.textContent=`${g.day||'Jour ?'} ‚Ä¢ ${g.slot||'Cr√©neau ?'}`
    const cards=document.createElement('div'); cards.className='cards'

    // sort activities by name then teacher
    g.items.sort((a,b)=> (a.activity||'').localeCompare(b.activity||'') || (a.teacher||'').localeCompare(b.teacher||''))

    for(const it of g.items){
      const c=document.createElement('div'); c.className='card'
      if(hl && it.label.toLowerCase().includes(hl)) c.classList.add('hl')

      const h=document.createElement('h4'); h.textContent=it.activity||'(Activit√© ?)'; c.appendChild(h)

      const meta=document.createElement('div'); meta.className='meta'
      meta.innerHTML = [
        it.teacher? `üë©‚Äçüè´ ${it.teacher}`:null,
        it.room? `üìç ${it.room}`:null,
        it.label? `üè∑Ô∏è ${it.label}`:null
      ].filter(Boolean).join(' ¬∑ ')
      c.appendChild(meta)

      // capacity
      let capCls='ok'
      if(it.capacity>0){
        if(it.count>=it.capacity) capCls='full'
        else if(it.count>=it.capacity*0.8) capCls='warn'
      }
      const cap=document.createElement('div'); cap.className='cap '+capCls
      const ratio = it.capacity? `${it.count}/${it.capacity}` : `${it.count}`
      cap.innerHTML = `üë• ${ratio}`
      c.appendChild(cap)

      // badges (first 6 names if list)
      if(it.list && it.list.length){
        const b=document.createElement('div'); b.className='badges'
        it.list.slice(0,6).forEach(n=>{ const tag=document.createElement('span'); tag.className='badge'; tag.textContent=n; b.appendChild(tag) })
        if(it.list.length>6){ const tag=document.createElement('span'); tag.className='badge'; tag.textContent = `+${it.list.length-6} autres`; b.appendChild(tag) }
        c.appendChild(b)
      }

      cards.appendChild(c)
    }

    col.appendChild(head)
    const cont=document.createElement('div'); cont.className='cards'; cont.appendChild(cards)
    col.appendChild(cont)
    cols.appendChild(col)
  }

  document.getElementById('view').style.display='block'
  document.getElementById('filtersPanel').style.display='block'
}

function exportViewCsv(){
  const rows = normalizeRows()
  const out = [['Jour','Cr√©neau','Activit√©','Prof','Lieu','Libell√©','Inscrits','Capacit√©','Taux']]
  for(const r of rows){
    const taux = r.capacity? (Math.round((r.count/r.capacity)*100)+'%') : ''
    out.push([r.day,r.slot,r.activity,r.teacher,r.room,r.label,r.count,r.capacity||'',taux])
  }
  const csv = toCSV(out)
  const blob=new Blob([csv],{type:'text/csv;charset=utf-8'})
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='as-planner.csv'; a.click(); URL.revokeObjectURL(a.href)
}

function toCSV(matrix){
  return matrix.map(row=>row.map(cell=>{
    const s=(cell??'').toString()
    if(/[\n",;]/.test(s)) return '"'+s.replace(/"/g,'""')+'"'
    return s
  }).join(';')).join('\n') // utilise ; par d√©faut (confort Numbers FR)
}

// --------------------- Input handlers ---------------------
const fileInput=document.getElementById('csvFile')
fileInput.addEventListener('change', async (e)=>{
  const f=e.target.files[0]; if(!f) return
  const text=await f.text(); const rows=parseCSV(text)
  handleTable(rows)
})

const dz=document.getElementById('dropzone')
;['dragenter','dragover'].forEach(ev=>dz.addEventListener(ev,e=>{e.preventDefault(); dz.classList.add('drag')}))
;['dragleave','drop'].forEach(ev=>dz.addEventListener(ev,e=>{e.preventDefault(); dz.classList.remove('drag')}))
dz.addEventListener('drop', async (e)=>{
  const f=e.dataTransfer.files[0]; if(!f) return
  const text=await f.text(); const rows=parseCSV(text)
  handleTable(rows)
})

function usePasted(){
  const text=document.getElementById('paste').value.trim()
  if(!text){ alert('Collez d\'abord du CSV.'); return }
  handleTable(parseCSV(text))
}

function loadDemo(){
  const demo=`Jour;Cr√©neau;Activit√©;Prof;Lieu;Capacit√©;Inscrits;Libell√©\nLundi;12-13;Musculation;Caro;Salle 1;24;Alice,Bob,Chlo√©,David;AS lyc√©e\nLundi;12-13;Badminton;Ambroise;Gymnase;20;Eli,Farah,Gabriel;Coll√®ge\nLundi;13-14;Escalade;JB;Mur EPS;12;Hugo,In√®s,Jonas,Katia,Leo;AS lyc√©e\nMardi;12-13;CrossFit;Nordine;Salle 2;18;Malo,Nina;AS lyc√©e\nJeudi;12-13;Yoga;Rachel;Salle danse;16;;Coll√®ge`;
  const rows=parseCSV(demo)
  handleTable(rows)
}

// --------------------- Boot ---------------------
window.addEventListener('DOMContentLoaded', ()=>{
  loadState()
})
</script>
</body>
</html>
