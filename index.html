<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QCM - R√®glement int√©rieur - Lyc√©e Vauban</title>
<link rel="icon" href="data:," />
<style>
  :root{
    --bg: #0f172a;          /* ardoise tr√®s fonc√© */
    --card: #111827;        /* gris nuit */
    --muted: #94a3b8;       /* texte secondaire */
    --fg: #e5e7eb;          /* texte principal */
    --accent: #8b5cf6;      /* violet fun */
    --accent-2: #06b6d4;    /* cyan fun */
    --good: #22c55e;
    --bad: #ef4444;
    --warning:#f59e0b;
  }
  *{box-sizing: border-box}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    background: radial-gradient(circle at 10% 10%, #0b1224, #0f172a 35%, #0b1224);
    color: var(--fg);
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }
  .wrap{
    min-height: 100dvh;
    display:flex; align-items:center; justify-content:center;
    padding: clamp(16px, 3vw, 32px);
  }
  .card{
    width: 100%;
    max-width: 980px;
    background: linear-gradient(180deg, rgba(17,24,39,.9), rgba(17,24,39,.85));
    border: 1px solid rgba(148,163,184,.15);
    border-radius: 24px;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
    padding: clamp(18px, 3.5vw, 36px);
    position:relative;
    overflow:hidden;
  }
  .ribbon{
    position:absolute; inset: -120px auto auto -120px; width: 280px; height: 280px;
    background: conic-gradient(from 230deg, var(--accent), var(--accent-2));
    filter: blur(40px); opacity:.25; pointer-events:none;
  }
  h1{
    font-size: clamp(24px, 4.5vw, 44px);
    margin: 0 0 10px 0; text-align:center;
    letter-spacing: .3px;
  }
  .subtitle{
    text-align:center; color: var(--muted);
    margin-bottom: 18px;
  }
  .center{
    display:flex; align-items:center; justify-content:center; gap:12px; flex-wrap:wrap;
  }
  .btn{
    appearance:none;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color:white; border:0; padding:14px 20px; border-radius:999px;
    font-size: clamp(16px, 2.2vw, 18px); font-weight:700; cursor:pointer;
    box-shadow: 0 8px 20px rgba(0,0,0,.25);
    transition: transform .06s ease, box-shadow .2s ease, filter .2s ease;
    outline: none;
  }
  .btn:hover{ transform: translateY(-1px); filter: brightness(1.08) }
  .btn:active{ transform: translateY(0); box-shadow: 0 2px 10px rgba(0,0,0,.3) }
  .btn.secondary{
    background: transparent; border:1px solid rgba(148,163,184,.3); color:var(--fg);
  }
  .btn.good{ background: linear-gradient(90deg, #16a34a, #22c55e) }
  .btn.bad{ background: linear-gradient(90deg, #ef4444, #f43f5e) }
  .grid{
    display:grid; gap:12px;
    grid-template-columns: 1fr; margin: 16px 0;
  }
  .answer{
    text-align:left; width:100%;
    background: #0b1020; border:1px solid rgba(148,163,184,.18);
    padding: 14px 14px; border-radius: 14px; cursor:pointer;
    font-size: clamp(16px, 2.1vw, 18px); line-height:1.35;
    transition: border-color .2s ease, transform .05s ease, background .2s ease;
  }
  .answer:hover{ border-color: rgba(139,92,246,.6) }
  .answer:active{ transform: scale(.99) }
  .answer.correct{ border-color: rgba(34,197,94,.9); background: rgba(34,197,94,.08) }
  .answer.wrong{ border-color: rgba(239,68,68,.85); background: rgba(239,68,68,.08) }
  .feedback{
    margin-top:10px; font-size: 15px; color: var(--muted);
  }
  .toprow{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    margin-bottom:6px;
  }
  .pill{
    padding: 6px 10px; border-radius:999px; font-size:12px;
    border:1px solid rgba(148,163,184,.25); color: var(--muted);
  }
  .progress{
    height:10px; background: #0b1020; border:1px solid rgba(148,163,184,.2);
    border-radius: 999px; overflow:hidden;
  }
  .bar{
    height:100%; width:0%;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    transition: width .25s ease;
  }
  .question{
    font-size: clamp(18px, 2.6vw, 22px);
    margin: 8px 0 6px 0;
  }
  .footer{
    margin-top:18px; display:flex; gap:10px; flex-wrap:wrap; justify-content:center;
  }
  .okline{ color: var(--good); font-weight:700 }
  .badline{ color: var(--bad); font-weight:700 }
  .muted{ color: var(--muted) }
  hr{ border:0; border-top:1px solid rgba(148,163,184,.2); margin: 18px 0 }
  .synth{
    background: #0b1020; border:1px solid rgba(148,163,184,.2);
    border-radius: 16px; padding: 14px;
  }
  .synth h3{ margin: 4px 0 10px 0 }
  ul.clean{ margin:0; padding-left: 18px }
  .brand{
    text-align:center; font-size:12px; color:var(--muted); margin-top:8px
  }
  /* iPad-friendly touch targets */
  @media (hover:none){
    .answer{ padding: 16px 16px }
    .btn{ padding:16px 22px }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app">
      <div class="ribbon" aria-hidden="true"></div>

      <!-- √âcran d'accueil -->
      <section id="screen-welcome">
        <h1>bienvenue ccm r√®glement int√©rieur Lycee Vauban</h1>
        <p class="subtitle">Un QCM court et fun pour (re)voir les r√®gles essentielles du lyc√©e ‚ú®</p>
        <div class="center">
          <button class="btn" id="startBtn">D√©marrer le QCM</button>
          <button class="btn secondary" id="aboutBtn" title="√Ä propos">√Ä propos</button>
        </div>
      </section>

      <!-- √âcran QCM -->
      <section id="screen-quiz" style="display:none">
        <div class="toprow">
          <div class="pill" id="pillProg">Question 1 / 20</div>
          <div class="pill" id="pillScore">Score : 0</div>
        </div>
        <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
        <h2 class="question" id="qText">Question</h2>
        <div class="grid" id="answers"></div>
        <div id="feedback" class="feedback" aria-live="polite"></div>
        <div class="footer">
          <button class="btn secondary" id="btnPrev" disabled>Pr√©c√©dent</button>
          <button class="btn" id="btnNext" disabled>Question suivante</button>
        </div>
      </section>

      <!-- √âcran r√©sultat / synth√®se -->
      <section id="screen-result" style="display:none">
        <h1>R√©sultat</h1>
        <p class="subtitle" id="finalLine"></p>
        <div class="center">
          <button class="btn" id="retryBtn">Rejouer</button>
          <button class="btn secondary" id="seeSynthBtn">Voir la synth√®se</button>
        </div>
        <hr />
        <div id="synthese" class="synth" style="display:none">
          <h3>üß≠ Synth√®se ‚Äì R√®glement int√©rieur (essentiels)</h3>
          <ul class="clean" id="synthList"></ul>
          <div class="footer">
            <button class="btn" id="csvBtn" title="Exporter en CSV">Exporter la synth√®se (CSV)</button>
          </div>
        </div>
      </section>

      <!-- √Ä propos -->
      <section id="screen-about" style="display:none">
        <h1>√Ä propos</h1>
        <p class="subtitle">QCM bas√© sur le <em>R√®glement int√©rieur Coll√®ge & Lyc√©e Vauban</em> (11/06/2025).</p>
        <p class="muted">Utilisable sur iPad. Aucune librairie externe ‚Äî h√©bergeable tel quel sur GitHub Pages.</p>
        <div class="center">
          <button class="btn secondary" id="backHomeBtn">Retour</button>
        </div>
      </section>

      <div class="brand">¬© Lyc√©e Vauban ‚Äì QCM p√©dagogique</div>
    </div>
  </div>

<script>
/* ===================== Donn√©es du QCM ===================== */
/* Chaque question : { q: "texte", options: ["A","B","C"], a: indexCorrect, explain: "feedback" } */

const QUESTIONS = [
  {
    q: "Les cours ont lieu du lundi 8 h 15 au vendredi 17 h 50.",
    options: ["Vrai", "Faux", "Du lundi 8 h 00 au samedi 12 h 00"],
    a: 0,
    explain: "Le RI pr√©cise que les cours se tiennent du lundi 8 h 15 au vendredi 17 h 50.",
  },
  {
    q: "Sans badge d‚Äôacc√®s et sans passage √† l‚Äôaccueil, on est consid√©r√© comme‚Ä¶",
    options: ["Autoris√© mais surveill√©", "Absent (hors responsabilit√© de l‚Äô√©tablissement)", "Retardataire mais autoris√© √† sortir"],
    a: 1,
    explain: "Entrer sans badge et sans se pr√©senter √† l‚Äôaccueil = absent ; aucune sortie en journ√©e sans badge.",
  },
  {
    q: "Badge perdu non retrouv√© apr√®s 8 jours :",
    options: ["Renouvel√© automatiquement et factur√© 20 ‚Ç¨", "Interdit d‚Äôentr√©e un mois", "Remplac√© gratuitement"],
    a: 0,
    explain: "Le badge est renouvel√© et factur√© 20 ‚Ç¨ apr√®s 8 jours (ou en cas de d√©gradation volontaire).",
  },
  {
    q: "√Ä l‚Äôentr√©e, le t√©l√©phone doit √™tre‚Ä¶",
    options: ["En silencieux dans la poche", "√âteint dans la pochette ¬´ No phone ¬ª verrouill√©e", "Autoris√© au foyer uniquement"],
    a: 1,
    explain: "Usage interdit : le t√©l√©phone est √©teint et plac√© dans la pochette ¬´ No phone ¬ª verrouill√©e, d√®s l‚Äôentr√©e.",
  },
  {
    q: "On d√©verrouille la pochette ¬´ No phone ¬ª‚Ä¶",
    options: ["√Ä la r√©cr√©ation", "√Ä la fin de la demi-journ√©e (externes) ou de la journ√©e (demi-pensionnaires)", "√Ä midi pour tous"],
    a: 1,
    explain: "D√©verrouillage en fin de demi-journ√©e pour les externes, en fin de journ√©e pour les demi-pensionnaires.",
  },
  {
    q: "iPad :",
    options: ["Libre, sans charte", "Mauvaise utilisation = restriction ; charte iPad engage l‚Äô√©l√®ve", "Autoris√© seulement en informatique"],
    a: 1,
    explain: "Toute mauvaise utilisation entra√Æne des restrictions ; la charte iPad engage l‚Äô√©l√®ve.",
  },
  {
    q: "Acc√®s au casier :",
    options: ["√Ä tout moment", "Avant la 1re heure, pendant la pause m√©ridienne, au d√©part (pas aux interclasses/r√©cr√©s sauf sac de sport)", "Jamais"],
    a: 1,
    explain: "Acc√®s aux moments d√©finis ; pas d‚Äôacc√®s aux interclasses/r√©cr√©ations, sauf pour d√©poser le sac de sport.",
  },
  {
    q: "R√©cr√©ation au coll√®ge :",
    options: ["On reste dans les b√¢timents", "On se rend dans la cour (on ne reste pas dans les b√¢timents)", "Libre acc√®s au CDI sans badge"],
    a: 1,
    explain: "Les coll√©giens ne restent pas dans les b√¢timents ; ils vont dans leur cour.",
  },
  {
    q: "Horaires de la caf√©t√©ria :",
    options: ["7 h 45 ‚Äì 15 h 15", "12 h 00 ‚Äì 14 h 00", "8 h 00 ‚Äì 18 h 00"],
    a: 0,
    explain: "La caf√©t√©ria est ouverte de 7 h 45 √† 15 h 15.",
  },
  {
    q: "Acc√®s au restaurant scolaire (oubli de badge) :",
    options: ["Pas de repas", "Fin de service avec billet de la gestion des absences/retards", "On peut emprunter le badge d‚Äôun camarade"],
    a: 1,
    explain: "En cas d‚Äôoubli, √† titre exceptionnel, l‚Äô√©l√®ve mange en fin de service, muni d‚Äôun billet.",
  },
  {
    q: "Le foyer des coll√©giens :",
    options: ["Ouvert √† tous, repas autoris√©s", "R√©serv√© aux coll√©giens ; nourriture et boisson interdites", "R√©serv√© aux lyc√©ens"],
    a: 1,
    explain: "Foyer = espace r√©serv√© aux coll√©giens ; sans nourriture ni boisson.",
  },
  {
    q: "Ascenseurs :",
    options: ["Ouverts √† tous", "R√©serv√©s au personnel et aux √©l√®ves √† mobilit√© r√©duite (badge sp√©cifique)", "R√©serv√©s aux lyc√©ens"],
    a: 1,
    explain: "Acc√®s ascenseurs restreint ; un badge sp√©cifique est d√©livr√© si n√©cessaire.",
  },
  {
    q: "Sorties de l‚Äô√©tablissement :",
    options: ["Autoris√© pendant les interclasses", "R√©cr√©ations interdites (sauf √©l√®ves majeurs) ; aucune sortie aux interclasses", "Libre si on pr√©vient un camarade"],
    a: 1,
    explain: "Les sorties sont encadr√©es : pas d‚Äôinterclasses ; r√©cr√©ations interdites (sauf √©l√®ves majeurs).",
  },
  {
    q: "En journ√©e, un √©l√®ve en retard :",
    options: ["Entre discr√®tement en cours", "N‚Äôest pas accept√© en cours et va au foyer des coll√©giens", "Peut entrer avec l‚Äôaccord d‚Äôun √©l√®ve d√©l√©gu√©"],
    a: 1,
    explain: "En journ√©e, aucun √©l√®ve en retard n‚Äôest accept√© en cours ; il se rend au foyer.",
  },
  {
    q: "D√®s 5 retards non justifi√©s/trimestre :",
    options: ["Exclusion 3 jours", "Retenue d‚Äô1 heure", "Aucune cons√©quence"],
    a: 1,
    explain: "√Ä 5 retards non justifi√©s, une retenue d‚Äôune heure est appliqu√©e.",
  },
  {
    q: "Absences l√©gitimes :",
    options: ["Maladie, d√©c√®s d‚Äôun proche, force majeure", "Voyage familial, activit√© sportive priv√©e, job √©tudiant", "Fatigue, envie de r√©viser chez soi"],
    a: 0,
    explain: "La loi pr√©cise trois motifs l√©gitimes : maladie, d√©c√®s d‚Äôun proche, cas de force majeure.",
  },
  {
    q: "Dispense d‚ÄôEPS :",
    options: ["Autorise √† quitter l‚Äô√©tablissement", "Requiert un certificat m√©dical ; l‚Äô√©l√®ve reste au lyc√©e (cours/salle de travail/CDI)", "Peut √™tre auto-sign√©e √† l‚Äôann√©e"],
    a: 1,
    explain: "Dispense = motif m√©dical. L‚Äô√©l√®ve reste au lyc√©e (pr√©sence en cours ou salle de travail/CDI).",
  },
  {
    q: "Puff / cigarette √©lectronique :",
    options: ["Mineurs autoris√©s √† d√©tenir mais pas vapoter", "Interdite pour les mineurs (d√©tention et usage) ; confisqu√©e et d√©truite", "Autoris√©e en ext√©rieur"],
    a: 1,
    explain: "Les mineurs ne peuvent ni vapoter ni d√©tenir une e-cigarette. Marchandise confisqu√©e et d√©truite.",
  },
  {
    q: "Objets/produits interdits :",
    options: ["Pistolet √† billes, a√©rosol, objet tranchant", "Livre, gourde", "Cl√© USB, r√®gle"],
    a: 0,
    explain: "Tout objet dangereux/troublant (armes, armes factices, a√©rosols, objets tranchants‚Ä¶) est interdit.",
  },
  {
    q: "Droit d‚Äôexpression :",
    options: ["Autorise le pros√©lytisme", "Existe, mais n‚Äôautorise aucun pros√©lytisme/propagande", "Uniquement pour les d√©l√©gu√©s"],
    a: 1,
    explain: "Les √©l√®ves ont des droits, sans acte de pros√©lytisme ni de propagande.",
  },
];

/* Synth√®se (export CSV) */
const SYNTHESE_ITEMS = [
  ["Badge d‚Äôacc√®s", "Obligatoire ; en cas d‚Äôoubli ‚Üí accueil ; aucune sortie en journ√©e sans badge ; renouvellement 20 ‚Ç¨ si non retrouv√© > 8 jours."],
  ["T√©l√©phone/objets connect√©s", "Interdits. T√©l√©phone √©teint dans pochette ¬´ No phone ¬ª verrouill√©e d√®s l‚Äôentr√©e ; pas de captation d‚Äôimages/sons."],
  ["iPad", "Charte iPad engage ; mauvaise utilisation = restriction des usages."],
  ["Casier", "R√©serv√© aux affaires scolaires ; acc√®s avant 1re heure, pause m√©ridienne, d√©part (pas interclasses/r√©cr√© sauf sac de sport)."],
  ["R√©cr√©ations", "Coll√©giens dans leur cour ; on ne reste pas dans les b√¢timents."],
  ["Cantine/Caf√©t√©ria", "Cantine via badge (oubli ‚Üí fin de service avec billet). Caf√©t√©ria 7 h 45 ‚Äì 15 h 15 ; pas de canettes ; pas de frigo/micro-ondes."],
  ["Foyer/CDI/Espaces", "Foyer r√©serv√© aux coll√©giens (sans nourriture/boisson). CDI et salles d‚Äôautonomie avec r√®gles et horaires d√©di√©s."],
  ["Ascenseurs", "R√©serv√©s au personnel et √©l√®ves √† mobilit√© r√©duite (badge sp√©cifique)."],
  ["Sorties", "Pas aux interclasses ; r√©cr√©ations interdites (sauf majeurs). Proc√©dure ¬´ sortie exceptionnelle ¬ª si besoin."],
  ["Retards", "En journ√©e : non admis en cours ‚Üí foyer. √Ä 5 retards non justifi√©s/trimestre : 1h de retenue."],
  ["Absences", "Motifs l√©gitimes : maladie, d√©c√®s d‚Äôun proche, force majeure. Justificatifs requis dans les d√©lais."],
  ["Dispense d‚ÄôEPS", "Certificat m√©dical ; l‚Äô√©l√®ve reste au lyc√©e (cours/salle de travail/CDI). Longue dur√©e = ‚â• 1 mois (possible maintien √† domicile sur demande)."],
  ["Puff / e-cigarette", "Mineurs : d√©tention et usage interdits ; marchandise confisqu√©e et d√©truite. Interdit pour tous dans l‚Äôenceinte."],
  ["S√©curit√© / objets", "Objets dangereux (armes, armes factices, a√©rosols, objets tranchants‚Ä¶) interdits et sanctionn√©s."],
  ["Tenue & neutralit√©", "Tenue correcte (zones du corps couvertes) ; signes religieux ostensibles et dissimulation du visage interdits."],
  ["Droit d‚Äôexpression", "Exerc√© sans pros√©lytisme ni propagande."]
];

/* ===================== M√©canique du QCM ===================== */
let i = 0, score = 0, answered = false;

const $ = sel => document.querySelector(sel);
const app = {
  screens: {
    welcome: $("#screen-welcome"),
    quiz: $("#screen-quiz"),
    result: $("#screen-result"),
    about: $("#screen-about")
  },
  el: {
    start: $("#startBtn"),
    about: $("#aboutBtn"),
    backHome: $("#backHomeBtn"),
    pillProg: $("#pillProg"),
    pillScore: $("#pillScore"),
    bar: $("#bar"),
    qText: $("#qText"),
    answers: $("#answers"),
    feedback: $("#feedback"),
    btnPrev: $("#btnPrev"),
    btnNext: $("#btnNext"),
    finalLine: $("#finalLine"),
    retry: $("#retryBtn"),
    seeSynth: $("#seeSynthBtn"),
    synthWrap: $("#synthese"),
    synthList: $("#synthList"),
    csvBtn: $("#csvBtn"),
  }
};

function show(screen){
  Object.values(app.screens).forEach(s => s.style.display="none");
  screen.style.display = "";
}
function start(){
  i = 0; score = 0; answered = false;
  app.el.pillScore.textContent = "Score : 0";
  renderQuestion();
  show(app.screens.quiz);
}
function renderQuestion(){
  const q = QUESTIONS[i];
  app.el.pillProg.textContent = `Question ${i+1} / ${QUESTIONS.length}`;
  app.el.bar.style.width = `${(i)/QUESTIONS.length*100}%`;
  app.el.qText.textContent = q.q;
  app.el.answers.innerHTML = "";
  app.el.feedback.textContent = "";
  app.el.btnPrev.disabled = i === 0;
  app.el.btnNext.disabled = true;
  answered = false;
  q.options.forEach((opt, idx)=>{
    const btn = document.createElement("button");
    btn.className = "answer";
    btn.innerHTML = opt;
    btn.addEventListener("click", ()=>{
      if (answered) return;
      answered = true;
      const correct = idx === q.a;
      if (correct){
        btn.classList.add("correct");
        app.el.feedback.innerHTML = `<span class="okline">Bonne r√©ponse !</span> ${q.explain}`;
        score++;
        app.el.pillScore.textContent = `Score : ${score}`;
      }else{
        btn.classList.add("wrong");
        // Surbrillance de la bonne r√©ponse
        [...app.el.answers.children][q.a].classList.add("correct");
        app.el.feedback.innerHTML = `<span class="badline">Oups !</span> ${q.explain}`;
      }
      app.el.btnNext.disabled = false;
    });
    app.el.answers.appendChild(btn);
  });
}
function next(){
  if (!answered) return;
  if (i < QUESTIONS.length - 1){
    i++; renderQuestion();
  }else{
    finish();
  }
}
function prev(){
  if (i>0){ i--; renderQuestion(); }
}
function finish(){
  app.el.bar.style.width = "100%";
  const pct = Math.round(score/QUESTIONS.length*100);
  let emoji = "üí™";
  if (pct === 100) emoji = "üèÜ";
  else if (pct >= 80) emoji = "üéØ";
  else if (pct >= 60) emoji = "üëç";
  else if (pct >= 40) emoji = "üôÇ";
  else emoji = "üå±";
  app.el.finalLine.textContent = `${emoji} Score : ${score}/${QUESTIONS.length} (${pct} %)`;
  show(app.screens.result);
}
function buildSynth(){
  if (app.el.synthWrap.style.display !== "none") return;
  app.el.synthList.innerHTML = "";
  SYNTHESE_ITEMS.forEach(([theme, texte])=>{
    const li = document.createElement("li");
    li.innerHTML = `<strong>${theme} :</strong> ${texte}`;
    app.el.synthList.appendChild(li);
  });
  app.el.synthWrap.style.display = "";
}
function exportCSV(){
  const rows = [["Theme","Regle"]];
  SYNTHESE_ITEMS.forEach(r => rows.push(r));
  const csv = rows.map(r=>r.map(x=>`"${String(x).replaceAll('"','""')}"`).join(",")).join("\r\n");
  const blob = new Blob([csv], {type:"text/csv;charset=utf-8"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "synthese-reglement-lycee-vauban.csv";
  document.body.appendChild(a);
  a.click();
  a.remove();
}

/* ===================== Events ===================== */
app.el.start.addEventListener("click", start);
app.el.about.addEventListener("click", ()=>show(app.screens.about));
app.el.backHome.addEventListener("click", ()=>show(app.screens.welcome));
app.el.btnNext.addEventListener("click", next);
app.el.btnPrev.addEventListener("click", prev);
app.el.retry.addEventListener("click", start);
app.el.seeSynth.addEventListener("click", buildSynth);
app.el.csvBtn.addEventListener("click", exportCSV);

/* Accessibilit√© clavier : fl√®ches et Enter */
window.addEventListener("keydown", (e)=>{
  if (app.screens.quiz.style.display !== "none"){
    if (e.key === "ArrowRight") next();
    if (e.key === "ArrowLeft") prev();
  }
});
</script>
</body>
</html>
